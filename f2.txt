using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.OleDb;

namespace EIT_B27_Segota_Filip
{
    public partial class BrojDece : Form
    {
        OleDbConnection con;
        public BrojDece()
        {
            InitializeComponent();

            string putanja = Environment.CurrentDirectory;
            string[] putanjaBaze = putanja.Split(new string[] { "bin" }, StringSplitOptions.None);
            AppDomain.CurrentDomain.SetData("DataDirectory", putanjaBaze[0]);

            con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=|DataDirectory|\Dnevni boravak dece.accdb");
        }

        private void button2_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            dataGridView1.Rows.Clear();
            con.Open();
            OleDbCommand cmd = new OleDbCommand();
            int brojdece = new int();
            int.TryParse(numericUpDown1.Value.ToString(), out brojdece);

            //true false false
            if (checkBox1.Checked == true && checkBox2.Checked == false && checkBox3.Checked == false)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " + 
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                else if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);


                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == false && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 2);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }

            //true true false
            else if (checkBox1.Checked == true && checkBox2.Checked == true && checkBox3.Checked == false)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);
                    cmd.Parameters.AddWithValue("@svojstvo2", 1);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2)", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);
                    cmd.Parameters.AddWithValue("@svojstvo2", 1);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }
            if (checkBox4.Checked == false && checkBox5.Checked == true)
            {
                cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                    "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                    "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                    "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                    "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                    "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                cmd.Parameters.AddWithValue("@pol", 2);
                cmd.Parameters.AddWithValue("@broj", brojdece);
                cmd.Parameters.AddWithValue("@svojstvo", 2);
                cmd.Parameters.AddWithValue("@svojstvo2", 1);

                OleDbDataReader reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                }
                reader.Close();
                reader.Dispose();
            }
            //true true true
            else if (checkBox1.Checked == true && checkBox2.Checked == true && checkBox3.Checked == true)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }
            if (checkBox4.Checked == false && checkBox5.Checked == true)
            {
                cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                    "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                    "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                    "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                    "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                    "where Dete.PolID = @pol", con);

                cmd.Parameters.AddWithValue("@pol", 2);
                cmd.Parameters.AddWithValue("@broj", brojdece);

                OleDbDataReader reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                }
                reader.Close();
                reader.Dispose();
            }

            //true false true
            else if (checkBox1.Checked == true && checkBox2.Checked == false && checkBox3.Checked == true)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);
                    cmd.Parameters.AddWithValue("@svojstvo2", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2)", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 2);
                    cmd.Parameters.AddWithValue("@svojstvo2", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }
            if (checkBox4.Checked == false && checkBox5.Checked == true)
            {
                cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                    "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                    "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                    "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                    "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                    "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                cmd.Parameters.AddWithValue("@pol", 2);
                cmd.Parameters.AddWithValue("@broj", brojdece);
                cmd.Parameters.AddWithValue("@svojstvo", 2);
                cmd.Parameters.AddWithValue("@svojstvo2", 3);

                OleDbDataReader reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                }
                reader.Close();
                reader.Dispose();
            }
            //false true false
            else if (checkBox1.Checked == false && checkBox2.Checked == true && checkBox3.Checked == false)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 1);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                else if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 1);


                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == false && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 2);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 1);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }
            //false true true
            else if (checkBox1.Checked == false && checkBox2.Checked == true && checkBox3.Checked == true)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 1);
                    cmd.Parameters.AddWithValue("@svojstvo2", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2)", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 1);
                    cmd.Parameters.AddWithValue("@svojstvo2", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }
            if (checkBox4.Checked == false && checkBox5.Checked == true)
            {
                cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                    "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                    "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                    "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                    "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                    "where (Roditelji.SvojstvoID = @svojstvo or Roditelji.SvojstvoID = @svojstvo2) and Dete.PolID = @pol", con);

                cmd.Parameters.AddWithValue("@pol", 2);
                cmd.Parameters.AddWithValue("@broj", brojdece);
                cmd.Parameters.AddWithValue("@svojstvo", 1);
                cmd.Parameters.AddWithValue("@svojstvo2", 3);

                OleDbDataReader reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                }
                reader.Close();
                reader.Dispose();
            }
            //false false true
            else if (checkBox1.Checked == false && checkBox2.Checked == false && checkBox3.Checked == true)
            {
                if (checkBox4.Checked == true && checkBox5.Checked == false)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 1);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                else if (checkBox4.Checked == true && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from (((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo", con);

                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 3);


                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
                if (checkBox4.Checked == false && checkBox5.Checked == true)
                {
                    cmd = new OleDbCommand("select distinct Roditelji.Ime, Roditelji.Prezime, Roditelji.Adresa, Svojstvo_Roditelja.Svojstvo " +
                                                        "from ((((Roditelji inner join Svojstvo_Roditelja on Roditelji.SvojstvoID = Svojstvo_Roditelja.SvojstvoID) " +
                                                        "inner join Dete on Roditelji.RoditeljiID = Dete.RoditeljiID) " +
                                                        "inner join (select RoditeljiID as id from Dete where PolID = @pol group by RoditeljiID having count(*) = @broj) subq on Roditelji.RoditeljiID = subq.id) " +
                                                        "inner join (select RoditeljiID as id from Dete group by RoditeljiID having count(*) = @broj) subq2 on Roditelji.RoditeljiID = subq2.id) " +
                                                        "where Roditelji.SvojstvoID = @svojstvo and Dete.PolID = @pol", con);

                    cmd.Parameters.AddWithValue("@pol", 2);
                    cmd.Parameters.AddWithValue("@broj", brojdece);
                    cmd.Parameters.AddWithValue("@svojstvo", 3);

                    OleDbDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        dataGridView1.Rows.Add(reader[0].ToString(), reader[1].ToString(), reader[2].ToString(), reader[3].ToString());
                    }
                    reader.Close();
                    reader.Dispose();
                }
            }

            cmd.Dispose();
            con.Close();
        }
    }
}
